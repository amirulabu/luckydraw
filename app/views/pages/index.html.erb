<div class="center jumbotron">
	<h1 align="center">Lucky Draw</h1>
	
	
	<div align="center" class="luckyname">
	<p><%= @lucky_person != nil ? @lucky_person.name : "--" %></p>
	<p>
		<% if @lucky_person != nil %>
			<%  @lucky_person.petid.each_char.with_index do |i,index| %>
				<%= index > 2 ? i : "*" %>
			<% end %>
		<% else %>
			<%= "--" %>
		<% end %>		
	</p>
	</div>
	<% if user_signed_in? && current_user.super_admin? %>
	<button type="button" class="btn btn-primary btn-lg center-block" id="load" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Selecting Winner">Draw now</button>
	<% else %>
	<button type="button" class="btn btn-success btn-lg center-block" id="load" data-loading-text="<i class='fa fa-spinner fa-spin '></i>Refreshing list">Refresh</button>
	<% end %>
	

</div>

<div class="row">

	<div class="col-md-12">
		<div class="well well-lg">
			<h2>Lucky Name List</h2>
			<ul class="list-group front-list">
				<% @people.each_with_index do |person,index| %>
				<li class="list-group-item"> 
					Prize number <%= ((@people.count - index) - 41).abs %> : 
					<%= person.name %>
				</li>
				<% end %>
			</ul>	

		</div>
	</div>
</div>

<script type="text/javascript">

	$('.btn-primary').on('click', function() {
		var $this = $(this);
		$('.luckyname').slideUp();
		$this.button('loading');
		setTimeout(function() {
			$this.button('reset');
			window.location.assign("/random");
			$('.luckyname').slideDown();
		}, 3000);
		
	});

	$('.btn-success').on('click', function() {
		var $this = $(this);
		$this.button('loading');
		setTimeout(function() {
			$this.button('reset');
			location.reload();
		}, 3000);

	});


</script>
